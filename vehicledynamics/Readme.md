# Package overview
The *vehicledynamics* folder contains all source code and models which is related to the vehicle dynamics simulation. This includes e.g. chassis models like the nonlinear single-track model and the nonlinear double-track model as well as tire models like the Pacejka model. Furthermore, some test cases are included to evaluate the vehicle dynamics models given a predefined input, the tire model in detail or to compare both model variants.

The nonlinear single-track model `nonlinearstm.slx` considers the following effects:

* Position of the center of gravity and wheelbase
* Steering wheel angle at the front axle
* Mass and Yaw inertia
* Nonlinear tire forces based on a simple Pacejka model
* Transient behavior for tire slips (modeled via simple first order low passes)
* Aerodynamic drag and lift
* Wheel rotational dynamics for longitudinal slip
* Position dynamics based on standard kinematic equations


The nonlinear double-track model extends the single-track model in several aspects. There are two implementations available: `VDBS_PassVeh14DOF.slx` utilizes the examples provided by the Vehicle Dynamics Blockset of Mathworks and only adjusts a few key parameters. In `nonlineardtm.slx` a customized version targeted at race-car vehicle dynamics is implemented. The double-track model in general considers vehicle dynamics including vertical dynamics, roll and pitch, dynamic changes in wheel loads and degressive tire behaviour. The implemented vehicle dynamics model pays particular attention to the following points:

* Modeling of the vehicle behaviour with consideration of the vehicle vertical dynamics
* Consideration of a three dimensional roadway profile with road longitudinal and lateral inclination
* Modeling of road unevenness and consideration of variable friction coefficients
* Transformation of the sensor position and orientation of vehicle sensors depending on the vehicle body movement
* Implementation of an extended Pacejka tire model


Contact person: [Leonhard Hermansdorfer ](mailto:leo.hermansdorfer@tum.de)

## datadict
This folder contains the data dictionaries handed to the specific vehicle dynamics model. These data dictionaries aggregate several data dictionaries which are necessary for running the simulation (e.g. vehicle parameters and bus definitions). The parameters itself can be found in `simulation/sim_vehicle_dynamics/parameters`.
* `nonlineardtm.sldd` aggregates all data dictionaries necessary to run the nonlinear double-track model (customized)
* `nonlinearstm.sldd` aggregates all data dictionaries necessary to run the nonlinear single-track model
* `VDBS_PassVeh14DOF.sldd` aggregates all data dictionaries necessary to run the nonlinear double-track model (Vehicle Dynamics Blockset Standard) 

## models
* `nonlineardtm.slx` is the nonlinear double-track model implementation (all parameters and initial states are imported via the above mentioned data dictionary)
* `nonlinearstm.slx` is the nonlinear single-track model implementation (only position states are handed via the above mentioned data dictionary; parameters are imported from `simulation/sim_vehicle_dynamics/parameters` folder directly)
* `VDBS_PassVeh14DOF.slx` is the standard nonlinear double-track model implementation of the MathWorks [*Vehicle Dynamics Blockset*]

The nonlinear double-track model was set up using the MathWorks [*Vehicle Dynamics Blockset*](https://de.mathworks.com/products/vehicle-dynamics/features.html#full-vehicle-simulation). Therefore, a detailed overview and explanation of the nonlinear double-track model can be found consulting the Documentation within Matlab.

## source
This folder contains all scripts necessary to calculate the vehicle dynamics equations for both models (single-track and double-track). For more detailed information see the documentation in the header of each individual script.

## test
This folder contains various Simulink models to test both vehicle dynamics models and to compare them.
* `check_ndtm` provides a set of different tests to evaluate the nonlinear double-track model in detail 
* `check_nstm` provides a test to evaluate the nonlinear single-track model
* `check_tiredata` provides a set of different tests to evaluate the tire model only

### setting up a new test case
To set up a new, customized test just copy one of the existing Simulink models (ending with `.slx`). Now you can use available Simulink blocks to set up your own inputs and output handling.


# Parameter settings
If you like to change vehicle parameters, go to `simulation/sim_vehicle_dynamics/parameters` folder.

# Model Topology
The single-track model is implemented by only using matlab-scripts which are located in the source (src) folder. The double-track model is way more complicated in it's structure. Therefore, an extensive description is provided below.
If you want to use the single-track model only you can jump the model topology description and go to *Coordinate Systems* directly.

The Simulink nonlinear double-track model comes along with a modular model topology. The implemented nonlinear double-track model incorporates and extends the following modules from Matlab's Vehicle Dynamics Blockset by user-defined modules and subfunctions:
* Vehicle Body
* Suspension
* Wheels and Tires

The modular structure of the nonlinear double-track model in Simulink is shown below. The Vehicle Dynamics Modules build up the core of the nonlinear double-track model. The model is based on a vehicle body model with six degrees of freedom, different suspensions on front and rear axle and different wheel, tire and brake characteristics on front and rear axle considering combined slip operating conditions. 

![double-track model structure](resources/ndtm_layout.PNG)

The _Vehicle Body_ subsystem represents the vehicle kinetics considering inertia, gravitation, aerodynamics, suspension forces and moments as well as extern forces and moments. Output variables are the position, orientation and velocity of the vehicle body along the inertial axis system and the velocity, angular velocity and acceleration of the vehicle body in the vehicle fixed coordinate system. Additionally, position and velocities of the hardpoint locations are provided. For analysis purposes, there is force and moment information available.

The _Suspension subsystem_ comprises the transformation of tire forces and moments to the vehicle body hardpoint locations as well as the formulation of the vehicle vertical dynamics on the basis of the relative vertical position and velocity from wheels and vehicle body. There is an anti-rollbar model inherent.  Relative suspension heights are provided as outputs for analysis purposes. If the suspension characteristic values (camber, caster and toe angles) for the reference state and their relative rates of changes depending on the steering angle and the relative suspension height are available, the suspension subsystem considers the influence of wheel kinematics. The suspensions are modeled separately for the front and the rear axle.

The _Wheel, Tire and Brake subsystem_ computes the tire behaviour for given control input and road influence on the basis of a drive model and the MF-Tire model (Pacejka`s formulas). The block provides information about the tire forces and moments, the relative vertical wheel position and velocity as well as the wheel rotational velocity about the wheel spin axis. Necessary input signals are the translational tire velocities in longitudinal and lateral tire direction, the tire yaw rate, the wheel normal force, wheel camber, inflation pressure and vertical road displacement. The effective wheel radius, longitudinal slip and slip angle are available for further analysis. There is a drive model and a brake model inherent. The wheels are modeled separately to do justice to the different wheel, tire and brake construction on front and rear axle and to enable wheel selective control inputs for the drive torque, brake pressure and steering commands. Road properties,road profile and variable friction coefficients are taken into account. 

Note that the orange modules in the model topology scheme above comprise the standard blocks of Vehicle Dynamics Blockset with the Vehicle Dynamic Blockset signal specifications and naming conventions. All signal manipulation and signal renaming is done within the signal routing subsystems.

Coordinate Transformations and signal manipulations are introduced between the subsystems in order to provide the vehicle dynamics blocks with the signals in the requested form. Rotation matrices are computed separately for each timestep once to reduce computational effort. Road inclination angles are computed within the interface computations at the beginning. The transformation of the sensor position and orientation depending on the vehicle body movement is realized within the interface computations at the model exit.


The model layout is orientated to the general conventions within the Roborace-project. Models, subsystems and function blocks representing the physical behaviour of the vehicle, components, sensors and actors are colored orange. Function blocks with elementary math operations are marked cyan. Dynamic computations on the basis of differential or integral equations are marked light blue. Signal routing and signal manipulation are colored yellow. Inports and outports are highlighted green and red respectively. Switches are colored magenta. 

Signals from _Vehicle Body_, _Suspension_, _Wheel, Tire and Brake_ and _Sensor_ subsystem as well as _Transformation_ signals form separate Simulink busses. Kinematic signals and force/moment signals are organized in separate bus systems within the double-track model. Signals and parameters on axle level are organized columnwise in matrices of the dimension mx2. Signals and parameters on wheel and tire level are organized columnwise in matrices of the dimension mx4. The index m denotes the dimension of a scalar or vector stored in the matrix. 


**Note: Powertrain and Steering models used in this project are separate from Matlab's models and therefore defined independently.**


# Coordinate Systems
Different coordinate conventions are used for the single-track and the double-track model.

The global coordinate system used within the whole project is right-handed with the x-axis pointing to East, the y-axis pointing to North and therefore the z-axis pointing upwards.
The heading angle of the vehicle is equal to zero when it is aligned to the positive y-axis (vehicle heads to North). If the vehicle is heading to South, the heading angle is pi and -pi, respectively. If the vehicle heads to West, the angle is positive and somewhere between 0 and pi. If the vehicle heads to East, the angle is negative and somewhere between 0 and -pi.

Within the double-track model, a different coordinate system definition is used due to the preset definitions of the Mathworks Simulink model. The figure below shows how this particular coordinate system is defined in comparison to the project wide coordinate system.
**Note that all signals, which are taken out of the double-track model and further used, are transformed to the project wide definition. If you use signals from inside the double-track model, you will have to transform them in most cases.**

![different coordinate system definitions](resources/CoSy_different.PNG)



## Coordinate Systems of the single-track model
The dynamic model of the vehicle is based on a single-track model with the corresponding coordinate system as depicted below.
The coordinate system right-handed meaning the z-coordinate points upwards to the sky. The vehicle is driving in x-direction.

![single-track model Coordinate System](resources/cosy_STM.png)

The model includes the following effects:

* Position of the center of gravity and wheelbase
* Steering wheel angle at the front axle
* Mass and Yaw inertia
* Nonlinear tire forces based on a simple Pacjeka model (see below for details)
* Transient behavior for tire slips (modeled via simple first order low passes)
* Aerodynamic drag and lift
* Wheel rotational dynamics for longitudinal slip
* Position dynamics based on standard kinematic equations


The model does not include the following effects:

* Load transfer in longitudinal and lateral direction
* Vertical dynamics
* Pitch / Roll
* Suspension setup and steering geometry


Another important point is the modeling of vehicle standstill. Using the standard tire slip definition, this leads to a division by zero. To circumvent this, a second vehicle kinematics model based purely on vehicle geometry and assuming zero slip is used. These two models are blended around a low speed of approx. 5-10kph to achieve stable numeric results.

## Coordinate Systems of the double-track model
The formulation of the equation of motion requires the kinematic description of relevant vehicle components relative to an inertial coordinate system. The following coordinate systems are defined within the Vehicle Dynamics Toolbox:

1. inertial reference frame `I`(**z-down-system**) with German equivalent letter `I`(Inertiales Koordinatensystem)
2. vehicle fixed coordinate system `V`(**z-down-system**) with German equivalent letter `K`(karosseriefestes Koordinatensystem)
3. wheel fixed coordinate systems `W`(**z-up-systems**) with German equivalent letter `R`(radfeste Koordinatensysteme)
4. tire fixed coordinate systems  `T`(**z-up-systems**) with German equivalent letter `T`(reifenfeste Koordinatensysteme)

Detailed explanation of the different coordinate systems:
1. The inertial system is located vertically below the vehicle center of mass at the intersection with the axle plane for zero displacement and zero rotation of the vehicle. The positive x-axis points along the vehicle longitudinal direction and the positive z-axis along the gravitational vector in zero state. The y-axis is chosen to a right-handed system (**z-down-orientation**). 
2. The vehicle fixed coordinate system is located at the center of the vehicle sprung mass. The positive x-axis points at any time along the longitudinal vehicle body direction parallel to the vehicle body middle plane. The y-axis points in lateral vehicle body direction orthogonal to the vehicle body middle plane. The z-axis is chosen to a right handed system with positive direction downwards (**z-down-orientation**).
3. The origin of the wheel fixed coordinate systems is located at the wheel center points. The positive x-axis shows parallel to the local road plane in wheel front direction and the y-axis parallel to the wheel spin axis. The z-axis builds a right handed system with positive -axis upwards (**z-up-orientation**). A wheel fixed coordinate system is defined for each wheel for axle *j* and track *i*.
4. The tire fixed coordinate systems are located at the contact point between tire-rubber and road surface. Their x-axes and y-axes lie in the local contact plane between road and tires. The positive x-axis is orientated forward and represents the intersection line of the contact plane with the wheel center plane. The z-axes are chosen positive upwards according to the right-handed rule (**z-up-orientation**). A tire fixed coordinate system is defined for each road-tire interface for axle *j* and track *i*.

The Vehicle Dynamics Blockset coordinate system definitions are depicted in the following two graphics from the MATLAB documentation:

![Inertial Coordinate System](resources/cosy_inertial.PNG)

![Inertial Coordinate System](resources/cosy_wheelandtire.PNG)


Beside the standard coordinate systems in the Vehicle Dynamics Toolbox, additional axis systems are introduced to represent inclined road planes. For the sake of formulation of the quarter vehicle models, the definition of axis systems without a reference point would be sufficient. Nevertheless, an additional rear axle fixed coordinate system with origin point and axis orientation makes sense and will be defined:

5. road fixed axis system `O`(**z-down-orientation**) with German equivalent letter `O`(fahrbahnfestes Achsensystem)
6. rear axle fixed `C`(chassis fixed) coordinate system (**z-down-orientation**) with German equivalent letter `F`(fahrzeugfestes Koordinatensystem)

**NOTE: Both Coordinate Systems are not necessary when driving on a flat surface. Inclined road is still under development.**

Detailed explanation of the additional coordinate systems:

5. The road fixed axis system describes the virtual road-tire contact plane for all four road-tire contact points and a sufficiently smooth road plane. Definition of the axis-system is sufficient. The positive x-axis points forward parallel to the vehicle middle plane, the y-axis and z-axis are rotated about the longitudinal and lateral road inclination angles. The positive z-axis forms a right-handed system and points downwards orthogonal to the virtual road plane (**z-down-orientation**). 
6. The rear axle fixed coordinate system depicts the vehicle horizontal dynamics relative to the inclined road plane. It is assumed to be vehicle fixed in the middle of the direct connection between the wheel center points on the rear axle. The x-axis points in the forward vehicle direction parallel to the vehicle middle plane, the y-axis in along the connection line between the wheel center points and the z-axis in a right-handed system downwards (**z-down-orientation**).

Indices in the signal names are used to provide information about the coordinate system of the signal. The coordinate system index follows after the first underscore('_') and is always one of the following:
* `I`: inertial coordinate system (**z-down-orientation**)
* `K`: vehicle-fixed coordinate system (**z-down-orientation**)
* `R_{ji}`: wheel-fixed coordinate system (**z-up-orientation**) (j=F,R (front,rear) and  i=L,R (left,right))
* `T_{ji}`: tire-fixed coordinate system (**z-up-orientation**) (j=F,R (front,rear) and  i=L,R (left,right))

Every x-axis points in the vehicle's heading direction, z-axis is pointing either up- or downwards. Every y-axis points in the direction which results in a right-handed coordinate system.


# Tire models
Within the single-track model a five coefficient Pacjeka model is used for longitudinal and lateral tire force calculation.
The tire slips are calculated for all four wheels upon the exact kinematic equations. Afterwards the resulting forces are summed for each axle and used within the single track model. This enables to have four independently driven motors without modeling load transfer.

The model includes the following effects:

* Linear and nonlinear tire operating range
* Linear load dependency

The model does not include the following effects:

* Combined tire operation (so the sim is overly optimistic in this aspect)
* Load degressivity (important for more precise over- and understeer analysis)
* Camber and tire degradation

Within the double-track model an extensive variant of the Pacejka tire model is used. It contains a variety of different parameters which are explained in the Matlab Documentation.
A more detailed overview and explanation can be found in the Pacejka book:

Pacejka, Hans B.; Besselink, Ignatius (2012): *Tire and vehicle dynamics.* 3. ed. Amsterdam, London, Oxford: Elsevier; Butterworth-Heinemann.


# Inputs and Outputs of the vehicle dynamics simulation
Both model variant (single-track and double-track) have the same input bus and the same output bus. This allows to switch between both models without any additional effort.

## Input of both models
The input bus of both models contains several signals. The single-track model only uses `SteeringAngle_rad`(which is then only a 1x1 scalar value instead of a 1x4 vector) , `T_DriveTorque_Nm` and `p_Brake_pa`. All other different input signals are used by the double-track model exclusively.

| parameter / signal name outside model</p>(as defined in Bus Definition) | unit | short description | dimension | parameter / signal name within vehicle dynamics model | extended description |
| ------ | ------ | ------ | ------ | ------ | ------ |
| SteeringAngle_rad     | rad   | steering angle at every wheel / virtual steering angle at front axle          | 1x4(dtm) / 1x1(stm)   | delta_ji_rad      | <p>steering angle at every wheel <span>(FL FR 0 0)</span>, given in wheel coordinates; positive angle means wheels pointing to the right; delta_rad = 0 means that wheels are pointing in vehicle's x-direction</p><p>XOR (according to model interfaces)</p><p>scalar virtual front axle steering angle if function block MapSteeringInterfaces is used within the nonlinear double-track model,&nbsp;given in wheel coordinates; positive angle means wheels pointing to the left; delta_rad = 0 means that wheels are pointing in vehicle's x-direction</p> |
| T_DriveTorque_Nm      | Nm    | torque at every wheel                                                         | Bus                   | Ty_Rji_alpha_rad  | <p>vector with torque at every wheel <span>(FL FR RL RR)</span>, y-direction given in wheel coordinates; positive torque means acceleration and negative torque means deceleration</p><p>XOR (according to model interfaces)</p><p>bus with torque at every wheel <span>(FL FR RL RR)</span>, if MapPowertrainInterfaces is used within the nonlinear double-track model, y-direction given in wheel coordinates; positive torque means acceleration and negative torque means deceleration</p> |
| p_Brake_pa            | Pa    | brake pressure at every wheel                                                 | Bus                   | p_Brake_Pa        | <p>vector with brake pressure at every wheel <span>(FL FR RL RR)</span>, brake pressure in the brake cylinders</p><p>XOR (according to model interfaces)</p><p>bus with torque at every wheel <span>(FL FR RL RR)</span>, if MapBrakeInterfaces is used within the nonlinear double-track model,&nbsp;brake pressure in the brake cylinders</p> | 
| F_V_Extern_N          | N     | external vehicle body forces                                                  | 3x1                   | F_K_Ext_N         | external vehicle body forces, acting at the CoG along the vehicle axis system |
| T_V_Extern_Nm         | Nm    | external vehicle body torque                                                  | 3x1                   | T_K_Ext_Nm        | extern vehicle body torque, acting at the CoG along the vehicle axis system |
| v_I_Wind_mps          | mps   | wind velocity                                                                 | 3x1                   | w_I_mps           | wind velocity along inertial axis system |
| z_I_Ground_m          | m     | ground displacement at the road-tire contact points                           | 1x4                   |                   | relative ground displacement at the road-tire contact points <span>(FL FR RL RR)</span>, given along the inertial axis system; positive relative ground displacement means lower height level relative to the inertial xy-plane; <span>negative relative ground displacement means higher height level relative to the inertial xy-plane (z-down-orientation)</span> |
| lambda_T_muex         |       | friction scale factor of the Pacejka tire-formula in longitudinal direction   | 1x4                   | lambda_Tji_muex   | <p><span>friction scale factors `lambda_muex_ji` of the Pacejka tire-formula at the road-tire interfaces <span>(FL FR RL RR), </span>in longitudinal direction, x-direction given in tire axis system; relative scaling of the maximum longitudinal coefficient of friction at road-tire interface</span></p> |
| lambda_T_muey         |       | friction scale factor of the Pacejka tire-formula in lateral direction        | 1x4                   | lambda_Tji_muey   | <p><span>friction scale factors `lambda_muey_ji` of the Pacejka tire-formula at the road-tire interfaces <span>(FL FR RL RR), </span>in lateral direction, y-direction given in tire axis system; relative scaling of the maximum lateral coefficient of friction at road-tire interface</span></p> |


Additional comments:
* `SteeringAngle_rad`: because no suspension effects are modeled, a single value for the steering angle is assumed at both wheels. The double-track model allows to set individual steering angel at each of the four wheels.
* `T_DriveTorque_Nm`: wheel torque containing `T_DriveTorque{ji}_Nm` at a specific wheel (j=F,R (front,rear) and  i=L,R (left,right)); single-track model takes same signals but adds up torques for each axle
* `p_Brake_pa`: brake pressure containing `p_BrakePressure{ji}_pa` at a specific wheel (j=F,R (front,rear) and  i=L,R (left,right)); single-track model takes same signals but adds up brake torques for each axle
* `F_K_Extern_N`: only dtm 
* `T_K_Extern_Nm`: only dtm 
* `v_I_Wind_mps`: only dtm 
* `z_I_Ground`: only dtm 
* `lambda_Tji_muex`: only dtm 
* `lambda_Tji_muey`: only dtm 


## Output of both models
Output of both models consists of the `SimRealState` bus. The `SimInformation` bus is only specified for the nonlinear double-track model and not used within the single-track model.

### SimRealState:

* `{i}_m`: position of vehicle at Center of Gravity (CoG) in i-direction (i=x,y,z)
* `phi_rad`: roll angle (rotation angle from the inertial axis system to the vehicle fixed x-axis)
* `theta_rad`: pitch angle (rotation angle from the inertial axis system to the vehicle fixed y-axis)
* `psi_rad`: yaw angle (rotation angle from the inertial axis system to the vehicle fixed z-axis)
* `v{i}_mps`: velocity of vehicle at Center of Gravity (CoG) in i-direction (i=x,y,z)
* `dphi_radps`: roll rate (angular velocity from the inertial axis system to the vehicle fixed x-axis)
* `dtheta_radps`: pitch rate (angular velocity from the inertial axis system to the vehicle fixed x-axis)
* `dpsi_radps`: yaw rate (angular velocity from the inertial axis system to the vehicle fixed x-axis)
* `a{i}_mps2`: acceleration of vehicle at Center of Gravity (CoG) in i-direction (i=x,y,z)
* `nWheel{ji}_radps`: wheel speed at j=F,R (front,rear) and  i=L,R (left,right)
* `DeltaWheel_rad`: steering angle of vehicle in rad
* `dnWheel{ji}_radps2`: wheel angular acceleration at j=F,R (front,rear) and  i=L,R (left,right)


### SimInformation:
This bus consists of several sub-buses which contain component specific simulation output.

* `Vehicle`: This bus contains information about the vehicle body in the vehicle body coordinate system (e.g. CoG-position, -velocity, -acceleration, roll, pitch, yaw angle and rate, ...)
* `Chassis`: This bus contains information about the vehicle body in the chassis coordinate system
* `Suspension`: This bus contains information about the vehicle suspension (e.g. suspension deflection)
* `Wheel`: This bus contains information about the vehicle wheels and tires (e.g. wheel speed, longitudinal slip, side slip)
* `Sensor`: This bus contains the 6D-position of a sensor mounted at the vehicle body (e.g. simulate the vehicle body movement for a camera on top of the vehicle)
* `Transformation`: This bus contains all transformation matrices necessary to transform between the several coordinate systems
* `Force`: This bus contains all forces which are calculated within the double-track model (e.g. tire forces, suspension forces, ...)

<table class="wrapped relative-table confluenceTable"><colgroup><col style="width: 14.5202%;" /><col style="width: 4.50626%;" /><col style="width: 17.58%;" /><col style="width: 6.34214%;" /><col style="width: 15.0209%;" /><col style="width: 41.8915%;" /></colgroup><tbody><tr><th class="confluenceTh" colspan="1"><p>parameter / signal name outside model</p>(as defined in Bus Definition)</th><th class="confluenceTh" colspan="1">unit</th><th class="confluenceTh">short description</th><th class="confluenceTh" colspan="1">dimension</th><th class="confluenceTh">parameter / signal name within vehicle dynamics model</th><th class="confluenceTh">extended description</th></tr><tr><td class="highlight-blue confluenceTd" title="Hintergrundfarbe : Blau" colspan="6" data-highlight-colour="blue">Vehicle</td></tr><tr><td class="confluenceTd" colspan="1">r_I_Vehicle_m</td><td class="confluenceTd" colspan="1">m</td><td class="confluenceTd" colspan="1">Absolute vehicle position in inertial reference frame</td><td class="confluenceTd" colspan="1">3x1</td><td class="confluenceTd" colspan="1">r_I_IK_m</td><td class="confluenceTd" colspan="1">Absolute position vector from the inertial coordinate system to the vehicle CoG, along the inertial axis system</td></tr><tr><td class="confluenceTd" colspan="1">v_I_Vehicle _mps</td><td class="confluenceTd" colspan="1">mps</td><td class="confluenceTd" colspan="1">Absolute vehicle velocity in inertial reference frame</td><td class="confluenceTd" colspan="1">3x1</td><td class="confluenceTd" colspan="1">v_I_IK_mps</td><td class="confluenceTd" colspan="1">Absolute velocity vector of vehicle CoG, along the inertial axis system</td></tr><tr><td class="confluenceTd" colspan="1">a_I_Vehicle_mps2</td><td class="confluenceTd" colspan="1">mps2</td><td class="confluenceTd" colspan="1">Absolute vehicle acceleration in inertial reference frame</td><td class="confluenceTd" colspan="1">3x1</td><td class="confluenceTd" colspan="1">a_I_IK_mps2</td><td class="confluenceTd" colspan="1">Absolute acceleration vector of vehicle CoG, along the inertial axis system (computed by numerical differentiation)</td></tr><tr><td class="confluenceTd" colspan="1">phi_I_Vehicle_rad</td><td class="confluenceTd" colspan="1">rad</td><td class="confluenceTd" colspan="1">Vehicle cardan angles</td><td class="confluenceTd" colspan="1">3x1</td><td class="confluenceTd" colspan="1">phi_IK_rad</td><td class="confluenceTd" colspan="1">Vehicle cardan angles, rotation angles from the inertial axis system to the vehicle fixed axis system; vector contains roll, pitch and yaw angle</td></tr><tr><td class="confluenceTd" colspan="1">omega_I_Vehicle_radps</td><td class="confluenceTd" colspan="1">radps</td><td class="confluenceTd" colspan="1">Absolute vehicle angular velocity in inertial reference frame</td><td class="confluenceTd" colspan="1">3x1</td><td class="confluenceTd" colspan="1">omega_I_IK_radps</td><td class="confluenceTd" colspan="1">Absolute angular velocity vector of the vehicle CoG, along the inertial axis system</td></tr><tr><td class="confluenceTd" colspan="1">alpha_I_Vehicle_radps2</td><td class="confluenceTd" colspan="1">radps2</td><td class="confluenceTd" colspan="1">Absolute vehicle angular acceleration in inertial reference frame</td><td class="confluenceTd" colspan="1">3x1</td><td class="confluenceTd" colspan="1">alpha_I_IK_radps2</td><td class="confluenceTd" colspan="1"><p><span>Absolute angular acceleration vector of the vehicle CoG, along the inertial axis system </span>(computed by numerical differentiation)</p></td></tr><tr><td class="confluenceTd" colspan="1">v_V_Vehicle _mps</td><td class="confluenceTd" colspan="1">mps</td><td class="confluenceTd" colspan="1">Absolute vehicle velocity along vehicle fixed axis system</td><td class="confluenceTd" colspan="1">3x1</td><td class="confluenceTd" colspan="1">v_K_IK_mps</td><td class="confluenceTd" colspan="1">Absolute velocity vector of vehicle CoG, along the vehicle fixed axis system</td></tr><tr><td class="confluenceTd" colspan="1">a_V_Vehicle_mps2</td><td class="confluenceTd" colspan="1">mps2</td><td class="confluenceTd" colspan="1">Absolute vehicle acceleration <span>along vehicle fixed axis system</span></td><td class="confluenceTd" colspan="1">3x1</td><td class="confluenceTd" colspan="1">a_K_IK_mps2</td><td class="confluenceTd" colspan="1">Absolute acceleration vector of vehicle CoG, <span>along the vehicle fixed axis system</span></td></tr><tr><td class="confluenceTd" colspan="1">omega_K_Vehicle_radps</td><td class="confluenceTd" colspan="1">radps</td><td class="confluenceTd" colspan="1">Absolute vehicle angular velocity <span>along vehicle fixed axis system</span></td><td class="confluenceTd" colspan="1">3x1</td><td class="confluenceTd" colspan="1">omega_K_IK_radps</td><td class="confluenceTd" colspan="1">Absolute angular velocity vector of the vehicle CoG, <span>along the vehicle fixed axis system</span></td></tr><tr><td class="confluenceTd" colspan="1">alpha_K_Vehicle_radps2</td><td class="confluenceTd" colspan="1">radps2</td><td class="confluenceTd" colspan="1">Absolute vehicle angular acceleration <span>along vehicle fixed axis system</span></td><td class="confluenceTd" colspan="1">3x1</td><td class="confluenceTd" colspan="1">alpha_K_IK_radps2</td><td class="confluenceTd" colspan="1"><p>Absolute angular acceleration vector of the vehicle CoG, <span>along the vehicle fixed axis system </span>(computed by numerical differentiation)</p></td></tr><tr><td class="confluenceTd" colspan="1">r_I_Hardpoints_m</td><td class="confluenceTd" colspan="1">m</td><td class="confluenceTd" colspan="1">Absolute position of the vehicle hardpoints along the inertial axis system</td><td class="confluenceTd" colspan="1">3x4</td><td class="confluenceTd" colspan="1">r_I_IAji_m</td><td class="confluenceTd" colspan="1"><span>Absolute position vectors from the inertial coordinate system to the vehicle hardpoint locations (FL FR RL RR), along the inertial axis system</span></td></tr><tr><td class="confluenceTd" colspan="1">v_I_Hardpoints_mps</td><td class="confluenceTd" colspan="1">mps</td><td class="confluenceTd" colspan="1"><span>Absolute velocity of the vehicle hardpoints along the inertial axis system</span></td><td class="confluenceTd" colspan="1">3x4</td><td class="confluenceTd" colspan="1">v_I_IAji_mps</td><td class="confluenceTd" colspan="1"><span>Absolute velocity vectors of the vehicle hardpoints (FL FR RL RR), along the inertial axis system</span></td></tr><tr><td class="confluenceTd" colspan="1">r_V_Cog2Hardpoints_m</td><td class="confluenceTd" colspan="1">m</td><td class="confluenceTd" colspan="1">Relative position of the vehicle hardpoints along the vehicle axis system</td><td class="confluenceTd" colspan="1">3x4</td><td class="confluenceTd" colspan="1">r_K_KAji_m</td><td class="confluenceTd" colspan="1">Relative position vectors from the vehicle fixed coordinate system to the vehicle hardpoint locations <span>(FL FR RL RR)</span>, along the vehicle fixed axis system</td></tr><tr><td class="confluenceTd" colspan="1">v_V_Hardpoints_mps</td><td class="confluenceTd" colspan="1">mps</td><td class="confluenceTd" colspan="1">Absolute velocity of the vehicle hardpoints along the vehicle axis system</td><td class="confluenceTd" colspan="1">3x4</td><td class="confluenceTd" colspan="1">v_K_IK_Aji_mps</td><td class="confluenceTd" colspan="1">Absolute velocity vectors of the vehicle hardpoint locations (FL FR RL RR), along the vehicle fixed axis system</td></tr><tr><td class="highlight-blue confluenceTd" title="Hintergrundfarbe : Blau" colspan="6" data-highlight-colour="blue">Chassis</td></tr><tr><td class="confluenceTd" colspan="1">r_I_Chassis_m</td><td class="confluenceTd" colspan="1">m</td><td class="confluenceTd" colspan="1">Absolute chassis position in inertial reference frame</td><td class="confluenceTd" colspan="1">3x1</td><td class="confluenceTd" colspan="1">r_I_IF_m</td><td class="confluenceTd" colspan="1">Absolute position vector from the inertial coordinate system to the rear axle fixed coordinate system, along the inertial axis system</td></tr><tr><td class="confluenceTd" colspan="1">v_I_Chassis _mps</td><td class="confluenceTd" colspan="1">mps</td><td class="confluenceTd" colspan="1">Absolute chassis velocity in inertial reference frame</td><td class="confluenceTd" colspan="1">3x1</td><td class="confluenceTd" colspan="1">v_I_IF_mps</td><td class="confluenceTd" colspan="1">Absolute velocity vector of <span>the rear axle fixed coordinate system</span>, along the inertial axis system <span>(computed by numerical differentiation)</span></td></tr><tr><td class="confluenceTd" colspan="1">a_I_Chassis_mps2</td><td class="confluenceTd" colspan="1">mps2</td><td class="confluenceTd" colspan="1">Absolute chassis acceleration in inertial reference frame</td><td class="confluenceTd" colspan="1">3x1</td><td class="confluenceTd" colspan="1">a_I_IF_mps2</td><td class="confluenceTd" colspan="1">Absolute acceleration vector of <span>the rear axle fixed coordinate system</span>, along the inertial axis system (computed by numerical differentiation)</td></tr><tr><td class="confluenceTd" colspan="1">phi_I_Chassis_rad</td><td class="confluenceTd" colspan="1">rad</td><td class="confluenceTd" colspan="1">Chassis cardan angles</td><td class="confluenceTd" colspan="1">3x1</td><td class="confluenceTd" colspan="1">phi_IF_rad</td><td class="confluenceTd" colspan="1">Chassis cardan angles, rotation angles from the inertial axis system to <span>the rear axle fixed coordinate system</span></td></tr><tr><td class="confluenceTd" colspan="1">omega_I_Chassis_radps</td><td class="confluenceTd" colspan="1">radps</td><td class="confluenceTd" colspan="1">Absolute chassis angular velocity in inertial reference frame</td><td class="confluenceTd" colspan="1">3x1</td><td class="confluenceTd" colspan="1">omega_I_IF_radps</td><td class="confluenceTd" colspan="1">Absolute angular velocity vector of <span>the rear axle fixed coordinate system</span>, along the inertial axis system <span>(computed by numerical differentiation)</span></td></tr><tr><td class="confluenceTd" colspan="1">alpha_I_Chassis_radps2</td><td class="confluenceTd" colspan="1">radps2</td><td class="confluenceTd" colspan="1">Absolute chassis angular acceleration in inertial reference frame</td><td class="confluenceTd" colspan="1">3x1</td><td class="confluenceTd" colspan="1">alpha_I_IF_radps2</td><td class="confluenceTd" colspan="1"><p>Absolute angular acceleration vector of <span>the rear axle fixed coordinate system</span>, along the inertial axis system (computed by numerical differentiation)</p></td></tr><tr><td class="confluenceTd" colspan="1">v_C_Chassis _mps</td><td class="confluenceTd" colspan="1">mps</td><td class="confluenceTd" colspan="1">Absolute chassis velocity along chassis fixed axis system</td><td class="confluenceTd" colspan="1">3x1</td><td class="confluenceTd" colspan="1">v_F_IF_mps</td><td class="confluenceTd" colspan="1">Absolute velocity vector of <span>the rear axle fixed coordinate system</span>, along the rear axle fixed axis system <span>(computed by numerical differentiation)</span></td></tr><tr><td class="confluenceTd" colspan="1">a_C_Chassis_mps2</td><td class="confluenceTd" colspan="1">mps2</td><td class="confluenceTd" colspan="1">Absolute chassis acceleration along chassis fixed axis system</td><td class="confluenceTd" colspan="1">3x1</td><td class="confluenceTd" colspan="1">a_F_IF_mps2</td><td class="confluenceTd" colspan="1">Absolute acceleration vector of <span>the rear axle fixed coordinate system</span>, along the rear axle fixed axis system <span>(computed by numerical differentiation)</span></td></tr><tr><td class="confluenceTd" colspan="1">omega_C_Chassis_radps</td><td class="confluenceTd" colspan="1">radps</td><td class="confluenceTd" colspan="1">Absolute chassis angular velocity along chassis fixed axis system</td><td class="confluenceTd" colspan="1">3x1</td><td class="confluenceTd" colspan="1">omega_F_IF_radps</td><td class="confluenceTd" colspan="1">Absolute angular velocity vector of <span>the rear axle fixed coordinate system</span>, along the rear axle fixed axis system <span>(computed by numerical differentiation)</span></td></tr><tr><td class="confluenceTd" colspan="1">alpha_C_Chassis_radps2</td><td class="confluenceTd" colspan="1">radps2</td><td class="confluenceTd" colspan="1">Absolute chassis angular acceleration along chassis fixed axis system</td><td class="confluenceTd" colspan="1">3x1</td><td class="confluenceTd" colspan="1">alpha_F_IF_radps2</td><td class="confluenceTd" colspan="1"><p>Absolute angular acceleration vector of the <span>the rear axle fixed coordinate system</span>, along the rear axle fixed axis system (computed by numerical differentiation)</p></td></tr><tr><td class="highlight-blue confluenceTd" title="Hintergrundfarbe : Blau" colspan="6" data-highlight-colour="blue">Suspension</td></tr><tr><td class="confluenceTd" colspan="1">h_Suspensions_m</td><td class="confluenceTd" colspan="1">m</td><td class="confluenceTd" colspan="1">Relative suspension height</td><td class="confluenceTd" colspan="1">1x4</td><td class="confluenceTd" colspan="1">h_ji_m</td><td class="confluenceTd" colspan="1">Relative suspension height compared to the unloaded reference state <span>(FL FR RL RR)</span>; suspension height is zero for the unloaded spring</td></tr><tr><td class="confluenceTd" colspan="1">wheelangles_rad</td><td class="confluenceTd" colspan="1">rad</td><td class="confluenceTd" colspan="1">Camber, caster and toe angles</td><td class="confluenceTd" colspan="1">3x4</td><td class="confluenceTd" colspan="1">gamma-tau-nu_rad</td><td class="confluenceTd" colspan="1">Camber, caster and toe angles (FL FR RL RR), relative to the road plane</td></tr><tr><td class="highlight-blue confluenceTd" title="Hintergrundfarbe : Blau" colspan="6" data-highlight-colour="blue">Wheel</td></tr><tr><td class="confluenceTd" colspan="1">r_I_Wheels_m</td><td class="confluenceTd" colspan="1">m</td><td class="confluenceTd" colspan="1">Absolute position of the wheel center along inertial axis system</td><td class="confluenceTd" colspan="1">3x4</td><td class="confluenceTd" colspan="1">r_I_IRji_m</td><td class="confluenceTd" colspan="1"><span>Absolute position vectors from the inertial coordinate system to the wheel centers <span>(FL FR RL RR)</span>, along the inertial axis system</span></td></tr><tr><td class="confluenceTd" colspan="1">v_C_Wheels_mps</td><td class="confluenceTd" colspan="1">mps</td><td class="confluenceTd" colspan="1"><span>Absolute velocity of the wheel center along rear axle fixed axis system</span></td><td class="confluenceTd" colspan="1">3x4</td><td class="confluenceTd" colspan="1">v_F_IRji_mps</td><td class="confluenceTd" colspan="1"><span>Absolute velocity vectors of the wheel center points <span>(FL FR RL RR)</span>, along the rear axle fixed axis system</span></td></tr><tr><td class="confluenceTd" colspan="1">re_WheelsEffective_m</td><td class="confluenceTd" colspan="1">m</td><td class="confluenceTd" colspan="1">Effective wheel radius</td><td class="confluenceTd" colspan="1">1x4</td><td class="confluenceTd" colspan="1">re_ji_m</td><td class="confluenceTd" colspan="1">Effective wheel radii <span>(FL FR RL RR)</span></td></tr><tr><td class="confluenceTd" colspan="1">omegay_W_Wheels_rad</td><td class="confluenceTd" colspan="1">rad</td><td class="confluenceTd" colspan="1">Rotational speed of the wheels</td><td class="confluenceTd" colspan="1">1x4</td><td class="confluenceTd" colspan="1">omegay_Rji_Rji_radps</td><td class="confluenceTd" colspan="1">Rotational speed of the wheels <span>(FL FR RL RR), along the wheel fixed y-axis</span></td></tr><tr><td class="confluenceTd" colspan="1">r_I_Tires_m</td><td class="confluenceTd" colspan="1">m</td><td class="confluenceTd" colspan="1"><span>Absolute position of the road-tire interface along inertial axis system</span></td><td class="confluenceTd" colspan="1">3x4</td><td class="confluenceTd" colspan="1">r_I_ITji_m</td><td class="confluenceTd" colspan="1"><span>Absolute position vectors from the inertial coordinate system to the road-tire interfaces </span><span>(FL FR RL RR)</span><span>, along the inertial axis system</span></td></tr><tr><td class="confluenceTd" colspan="1">kappa_Tires</td><td class="confluenceTd" colspan="1"><br /></td><td class="confluenceTd" colspan="1">Longitudinal slip</td><td class="confluenceTd" colspan="1">1x4</td><td class="confluenceTd" colspan="1">kappa_ji</td><td class="confluenceTd" colspan="1">Longitudinal slip at every tire (FL FR RL RR)</td></tr><tr><td class="confluenceTd" colspan="1">alpha_Tires_rad</td><td class="confluenceTd" colspan="1">rad</td><td class="confluenceTd" colspan="1">Slip angle</td><td class="confluenceTd" colspan="1">1x4</td><td class="confluenceTd" colspan="1">alpha_ji_rad</td><td class="confluenceTd" colspan="1"><span>Slip angle at every tire (FL FR RL RR)</span></td></tr><tr><td class="highlight-blue confluenceTd" title="Hintergrundfarbe : Blau" colspan="6" data-highlight-colour="blue">Sensor</td></tr><tr><td class="confluenceTd" colspan="1">r_I_VehicleSensor1</td><td class="confluenceTd" colspan="1">m</td><td class="confluenceTd" colspan="1"><span>Absolute position of the vehicle fixed sensor <em>Sensor 1</em> along inertial axis system</span></td><td class="confluenceTd" colspan="1">3x1</td><td class="confluenceTd" colspan="1">r_I_IS1_m</td><td class="confluenceTd" colspan="1">Absolute position vector from the inertial coordinate system to the location of the vehicle fixed sensor <em>Sensor 1</em> (e.g. camera, lidar), along the inertial axis system</td></tr><tr><td class="confluenceTd" colspan="1">r_I_VehicleSensor2</td><td class="confluenceTd" colspan="1">m</td><td class="confluenceTd" colspan="1">Absolute position of the vehicle fixed sensor <em>Sensor 2</em> along inertial axis system</td><td class="confluenceTd" colspan="1">3x1</td><td class="confluenceTd" colspan="1">r_I_IS2_m</td><td class="confluenceTd" colspan="1">Absolute position vector from the inertial coordinate system to the location of the vehicle fixed sensor <em>Sensor 2</em> (e.g. camera, lidar), along the inertial axis system</td></tr><tr><td class="confluenceTd" colspan="1">r_I_VehicleSensor3</td><td class="confluenceTd" colspan="1">m</td><td class="confluenceTd" colspan="1">Absolute position of the vehicle fixed sensor <em>Sensor 3</em> along inertial axis system</td><td class="confluenceTd" colspan="1">3x1</td><td class="confluenceTd" colspan="1">r_I_IS3_m</td><td class="confluenceTd" colspan="1">Absolute position vector from the inertial coordinate system to the location of the vehicle fixed sensor <em>Sensor 3</em> (e.g. camera, lidar), along the inertial axis system</td></tr><tr><td class="confluenceTd" colspan="1">rotmatrix_I2VehicleSensor1</td><td class="confluenceTd" colspan="1"><br /></td><td class="confluenceTd" colspan="1">Rotation matrix from inertial axis system to sensor fixed axis system of <em>Sensor 1</em></td><td class="confluenceTd" colspan="1">3x3</td><td class="confluenceTd" colspan="1">A_S1_I</td><td class="confluenceTd" colspan="1"><span>Rotation matrix from inertial axis system to sensor fixed axis system of the vehicle fixed sensor </span><em>Sensor 1 </em>(e.g. camera, lidar)</td></tr><tr><td class="confluenceTd" colspan="1">rotmatrix_I2VehicleSensor2</td><td class="confluenceTd" colspan="1"><br /></td><td class="confluenceTd" colspan="1">Rotation matrix from inertial axis system to sensor fixed axis system of <em>Sensor 2</em></td><td class="confluenceTd" colspan="1">3x3</td><td class="confluenceTd" colspan="1">A_S2_I</td><td class="confluenceTd" colspan="1">Rotation matrix from inertial axis system to sensor fixed axis system of the vehicle fixed sensor <em>Sensor 2 </em>(e.g. camera, lidar)</td></tr><tr><td class="confluenceTd" colspan="1">rotmatrix_I2VehicleSensor3</td><td class="confluenceTd" colspan="1"><br /></td><td class="confluenceTd" colspan="1">Rotation matrix from inertial axis system to sensor fixed axis system of <em>Sensor 3</em></td><td class="confluenceTd" colspan="1">3x3</td><td class="confluenceTd" colspan="1">A_S3_I</td><td class="confluenceTd" colspan="1">Rotation matrix from inertial axis system to sensor fixed axis system of the vehicle fixed sensor <em>Sensor 3 </em>(e.g. camera, lidar)</td></tr><tr><td class="highlight-blue confluenceTd" title="Hintergrundfarbe : Blau" colspan="6" data-highlight-colour="blue">Transformation</td></tr><tr><td class="confluenceTd" colspan="1">rotmatrix_I2V</td><td class="confluenceTd" colspan="1"><br /></td><td class="confluenceTd" colspan="1"><span>Rotation matrix from inertial axis system to vehicle fixed axis system </span></td><td class="confluenceTd" colspan="1">3x3</td><td class="confluenceTd" colspan="1">A_K_I</td><td class="confluenceTd" colspan="1"><span>Rotation matrix from inertial axis system to vehicle fixed axis system</span></td></tr><tr><td class="confluenceTd" colspan="1">rotmatrix_C2V</td><td class="confluenceTd" colspan="1"><br /></td><td class="confluenceTd" colspan="1">Rotation matrix from rear axle fixed axis system to vehicle fixed axis system</td><td class="confluenceTd" colspan="1">3x3</td><td class="confluenceTd" colspan="1">A_K_F</td><td class="confluenceTd" colspan="1">Rotation matrix from rear axle fixed axis system to vehicle fixed axis system</td></tr><tr><td class="confluenceTd" colspan="1">rotmatrix_I2C</td><td class="confluenceTd" colspan="1"><br /></td><td class="confluenceTd" colspan="1">Rotation matrix from inertial axis system to rear axle fixed fixed axis system</td><td class="confluenceTd" colspan="1">3x3</td><td class="confluenceTd" colspan="1">A_F_I</td><td class="confluenceTd" colspan="1">Rotation matrix from inertial axis system to rear axle fixed axis system</td></tr><tr><td class="confluenceTd" colspan="1">rotmatrix_C2WFL</td><td class="confluenceTd" colspan="1"><br /></td><td class="confluenceTd" colspan="1">Rotation matrix from rear axle fixed axis system to wheel fixed axis system FL</td><td class="confluenceTd" colspan="1">3x3</td><td class="confluenceTd" colspan="1">A_Rfl_F</td><td class="confluenceTd" colspan="1"><span>Rotation matrix from rear axle fixed axis system to wheel fixed axis system FL</span></td></tr><tr><td class="confluenceTd" colspan="1">rotmatrix_C2WFR</td><td class="confluenceTd" colspan="1"><br /></td><td class="confluenceTd" colspan="1">Rotation matrix from rear axle fixed axis system to wheel fixed axis system FR</td><td class="confluenceTd" colspan="1">3x3</td><td class="confluenceTd" colspan="1">A_Rfr_F</td><td class="confluenceTd" colspan="1">Rotation matrix from rear axle fixed axis system to wheel fixed axis system FR</td></tr><tr><td class="confluenceTd" colspan="1">rotmatrix_OrientationChange</td><td class="confluenceTd" colspan="1"><br /></td><td class="confluenceTd" colspan="1">Orientation change matrix</td><td class="confluenceTd" colspan="1">3x3</td><td class="confluenceTd" colspan="1">A_down_up</td><td class="confluenceTd" colspan="1">Symmetric rotation matrix between z-up orientation and z-down orientation</td></tr><tr><td class="highlight-blue confluenceTd" title="Hintergrundfarbe : Blau" colspan="6" data-highlight-colour="blue">Force</td></tr><tr><td class="confluenceTd" colspan="1">F_V_Vehicle_N</td><td class="confluenceTd" colspan="1">N</td><td class="confluenceTd" colspan="1">Cumulative vehicle forces</td><td class="confluenceTd" colspan="1">3x1</td><td class="confluenceTd" colspan="1">F_K_sum_N</td><td class="confluenceTd" colspan="1">Net force on vehicle CoG along vehicle fixed axis system</td></tr><tr><td class="confluenceTd" colspan="1">T_V_Vehicle_Nm</td><td class="confluenceTd" colspan="1">Nm</td><td class="confluenceTd" colspan="1">Cumulative vehicle moments</td><td class="confluenceTd" colspan="1">3x1</td><td class="confluenceTd" colspan="1">T_K_sum_Nm</td><td class="confluenceTd" colspan="1">Net moments on vehicle CoG along vehicle fixed axis system</td></tr><tr><td class="confluenceTd" colspan="1">F_V_Drag_N</td><td class="confluenceTd" colspan="1">N</td><td class="confluenceTd" colspan="1">Vehicle drag forces</td><td class="confluenceTd" colspan="1">3x1</td><td class="confluenceTd" colspan="1">F_K_d_N</td><td class="confluenceTd" colspan="1">Vehicle drag forces on vehicle CoG along vehicle fixed axis system</td></tr><tr><td class="confluenceTd" colspan="1">T_V_Drag_Nm</td><td class="confluenceTd" colspan="1">Nm</td><td class="confluenceTd" colspan="1">Vehicle drag moments</td><td class="confluenceTd" colspan="1">3x1</td><td class="confluenceTd" colspan="1">T_K_d_Nm</td><td class="confluenceTd" colspan="1">Vehicle drag moments on vehicle CoG along vehicle fixed axis system</td></tr><tr><td class="confluenceTd" colspan="1">F_V_Gravity_N</td><td class="confluenceTd" colspan="1">N</td><td class="confluenceTd" colspan="1">Vehicle gravity forces</td><td class="confluenceTd" colspan="1">3x1</td><td class="confluenceTd" colspan="1">F_K_g_N</td><td class="confluenceTd" colspan="1">Vehicle gravity forces on vehicle CoG along vehicle fixed axis system</td></tr><tr><td class="confluenceTd" colspan="1">F_V_Hardpoints_N</td><td class="confluenceTd" colspan="1">N</td><td class="confluenceTd" colspan="1">Vehicle hardpoint forces</td><td class="confluenceTd" colspan="1">3x4</td><td class="confluenceTd" colspan="1">F_K_Aji_N</td><td class="confluenceTd" colspan="1">Vehicle hardpoint forces <span>(FL FR RL RR)</span>, along vehicle fixed axis system</td></tr><tr><td class="confluenceTd" colspan="1">T_V_Hardpoints_Nm</td><td class="confluenceTd" colspan="1">Nm</td><td class="confluenceTd" colspan="1">Vehicle hardpoint moments</td><td class="confluenceTd" colspan="1">3x4</td><td class="confluenceTd" colspan="1">T_K_Aji_Nm</td><td class="confluenceTd" colspan="1">Vehicle hardpoint moments <span>(FL FR RL RR)</span>, along vehicle fixed axis system</td></tr><tr><td class="confluenceTd" colspan="1">F_C_Hardpoints_N</td><td class="confluenceTd" colspan="1">N</td><td class="confluenceTd" colspan="1">Vehicle hardpoint forces along rear axle fixed axis system</td><td class="confluenceTd" colspan="1">3x4</td><td class="confluenceTd" colspan="1">F_F_Aji_N</td><td class="confluenceTd" colspan="1">Vehicle hardpoint forces <span>(FL FR RL RR)</span>, along rear axle fixed axis system</td></tr><tr><td class="confluenceTd" colspan="1">T_C_Hardpoints_Nm</td><td class="confluenceTd" colspan="1">Nm</td><td class="confluenceTd" colspan="1">Vehicle hardpoint moments <span>along rear axle fixed axis system</span></td><td class="confluenceTd" colspan="1">3x4</td><td class="confluenceTd" colspan="1">T_F_Aji_Nm</td><td class="confluenceTd" colspan="1">Vehicle hardpoint moments <span>(FL FR RL RR)</span>, along rear axle fixed axis system</td></tr><tr><td class="confluenceTd" colspan="1">F_C_Tires_N</td><td class="confluenceTd" colspan="1">N</td><td class="confluenceTd" colspan="1">Tire forces along rear axle fixed coordinate system</td><td class="confluenceTd" colspan="1">3x4</td><td class="confluenceTd" colspan="1">F_F_Tji_N</td><td class="confluenceTd" colspan="1"><span>Tire forces <span>(FL FR RL RR)</span>, along rear axle fixed axis system</span></td></tr><tr><td class="confluenceTd" colspan="1">T_C_Tires_Nm</td><td class="confluenceTd" colspan="1">Nm</td><td class="confluenceTd" colspan="1">Tire moments along rear axle fixed coordinate system</td><td class="confluenceTd" colspan="1">3x4</td><td class="confluenceTd" colspan="1">T_F_Tji_Nm</td><td class="confluenceTd" colspan="1">Tire moments <span>(FL FR RL RR)</span>, along rear axle fixed axis system</td></tr><tr><td class="confluenceTd" colspan="1">F_T_Tires_N</td><td class="confluenceTd" colspan="1">N</td><td class="confluenceTd" colspan="1">Tire forces</td><td class="confluenceTd" colspan="1">3x4</td><td class="confluenceTd" colspan="1">F_Tji_Tji_N</td><td class="confluenceTd" colspan="1">Tire forces <span>(FL FR RL RR)</span>, along tire fixed axis system</td></tr><tr><td class="confluenceTd" colspan="1">T_T_Tires_Nm</td><td class="confluenceTd" colspan="1">Nm</td><td class="confluenceTd" colspan="1">Tire moments</td><td class="confluenceTd" colspan="1">3x4</td><td class="confluenceTd" colspan="1">T_Tji_Tji_Nm</td><td class="confluenceTd" colspan="1">Tire moments (FL FR RL RR), along tire fixed axis system</td></tr></tbody></table>

# Road inclination (under development)
The implemented nonlinear double-track model comes along with some model variants. Most important are the manual switches to enable/disable road inclination angles consideration. On system level of the nonlinear double-track model, there are two manual switches with the color magenta:

* Switch Computation Road Inclination Angles
* Switch Off/On Road Inclination Angles


Double clicking the _Switch Computation Road Inclination Angles_ changes between two different variants to compute the road inclination angles based on the vertical road displacement at the road-tire contact points. Double clicking the _Switch Off/On Road Inclination Angles_ turns Off/On the consideration of road inclination angles in the computation of the transformation matrix between inertial axis system and road fixed axis system. Switching off road inclination angles thus refers to the double-track model on plane road and switching on road inclination angles refers to the double-track model on the inclined road. Note that the _Switch Off/On Transformation Ground Displacement_ must be switched to on for inclined roads.

The model conversion to ISO 8855 standard is more sophisticated, affects signal names and thus is beyond the scope for the common model user.

## Model Assumptions
The formulation of the mathematical correlations of the nonlinear double-track model is based on a steered and spring-loaded reference vehicle state on the inclined road. The schematic sketch below adapts the model representation of the Vehicle Dynamics Toolbox for inclined roads. 

![vehicle on inclined road](resources/vehicle_on_inlined_road.JPG)

The implemented nonlinear double-track model is based on following implicit and explicit assumptions:

* The vehicle body represents the overall translational inertia of vehicle horizontal dynamics relative to the inclined road and the overall rotational inertia of the entire vehicle.
* The quarter vehicle models of vehicle vertical dynamics are formulated orthogonal to the virtual road plane. Inertia forces of wheel masses are only active along the effective direction of the spring-damper elements. Inertia forces from the wheel masses along the vehicle longitudinal and lateral direction on the inclined road are neglected. Wheel suspension kinematics is neglected.
* The tire forces and moments are computed in the virtual road plane for all tires according to the MF-Tire model (Pacejkas formulas). Relevant inputs for the tire model are formulated relative to the virtual road plan for all road-tire interfaces.
* Road unevenness is considered small. Small road unevenness justifies the definition of one single road plane to describe the road inclination on all four road-tire interface points.  

The formulation of the quarter vehicle models relative to the inclined road plane does not comply with the convention and definitions in ISO 8855. However, the formulation of the quarter vehicle models relative to the rear axle fixed axis system is preferred in order to comply with the chair convention to formulate steering angles and wheel suspension angles (camber, caster and toe angles) relative to the road plane and not relative to the vehicle fixed coordinate system. This also simplifies transformation into the wheel fixed and tire fixed coordinate systems. The model equations in compliance with the ISO 8855 standard are included as comments in the Simulink-model.


## Remarks
The road profile should be C_1-continuous for roads without kinks. C_1-continuity of the road profile is equivalent to a continuous height profile z_I to avoid edges ("Kantenfreiheit") and a continuous change rate zdot_I to avoid kinks ("Knickfreiheit"). 
C_1-continuity is required since both the the vertical displacement z_I and its derivative zdot_I are seen by the vertical dynamics model. The vertical forces are computed upon a vertical spring-damper-model. 
For C_0-continuous height profiles z_I discontinuities in zdot_I entail discontinuities in the vertical damper forces. This effect is especially important when discretizing the road height profile z_I. 
If the interpolation between discrete grid points z_I[x_I,y_I] of an originally smooth road profile z_I(x_I,y_I) is based on a linear interpolation, the double-track model might see mechanical excitations stemming solely from the discretization of the road profile and leading to impulse responses of the entire system. 

The following graphic gives an idea about the effects on the vertical displacement r_I_IK_m and the vertical velocity v_I_IK_mps of the vehicle fixed coordinate system V(Krperkoordinatensystem K). Pay attention to the z-down coordinate convention in the figures below.

![Road Inclination Continuity](resources/roadinclination_continuity.PNG)
